!function(p,c,u,b){u.swipebox=function(i,e){var t={useCSS:!0,hideBarsDelay:3e3},s=this,o=u(i),n=(i=i).selector,a=u(n),r=c.createTouch!==b||"ontouchstart"in p||"onmsgesturechange"in p||navigator.msMaxTouchPoints,d=!!p.SVGSVGElement;s.settings={},s.init=function(){s.settings=u.extend({},t,e),a.click(function(i){i.preventDefault(),i.stopPropagation(),index=o.index(u(this)),l.init(index)})};var l={init:function(i){this.build(),this.openSlide(i),this.openImg(i),this.preloadImg(i+1),this.preloadImg(i-1)},build:function(){var i=this;if(u("body").append('<div id="swipebox-overlay">\t\t\t\t\t<div id="swipebox-slider"></div>\t\t\t\t\t<div id="swipebox-caption"></div>\t\t\t\t\t<div id="swipebox-action">\t\t\t\t\t\t<a id="swipebox-close"></a>\t\t\t\t\t\t<a id="swipebox-prev"></a>\t\t\t\t\t\t<a id="swipebox-next"></a>\t\t\t\t\t</div>\t\t\t</div>'),i.doCssTrans()&&(u("#swipebox-slider").css({"-webkit-transition":"left 0.4s ease","-moz-transition":"left 0.4s ease","-o-transition":"left 0.4s ease","-khtml-transition":"left 0.4s ease",transition:"left 0.4s ease"}),u("#swipebox-overlay").css({"-webkit-transition":"opacity 1s ease","-moz-transition":"opacity 1s ease","-o-transition":"opacity 1s ease","-khtml-transition":"opacity 1s ease",transition:"opacity 1s ease"}),u("#swipebox-action, #swipebox-caption").css({"-webkit-transition":"0.5s","-moz-transition":"0.5s","-o-transition":"0.5s","-khtml-transition":"0.5s",transition:"0.5s"})),d){var e=u("#swipebox-action #swipebox-close").css("background-image");e=e.replace("png","svg"),u("#swipebox-action #swipebox-prev,#swipebox-action #swipebox-next,#swipebox-action #swipebox-close").css({"background-image":e})}o.each(function(){u("#swipebox-slider").append('<div class="slide"></div>')}),i.setDim(),i.actions(),i.keyboard(),i.gesture(),i.animBars(),u(p).resize(function(){i.setDim()}).resize()},setDim:function(){var i={width:u(p).width(),height:p.innerHeight?p.innerHeight:u(p).height()};u("#swipebox-overlay").css(i)},supportTransition:function(){for(var i="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" "),e=0;e<i.length;e++)if(c.createElement("div").style[i[e]]!==b)return i[e];return!1},doCssTrans:function(){if(s.settings.useCSS&&this.supportTransition())return!0},gesture:function(){if(r){var e=this,t=null,s={},o={},n=u("#swipebox-caption, #swipebox-action");n.addClass("visible-bars"),e.setTimeout(),u("body").bind("touchstart",function(i){return u(this).addClass("touching"),o=i.originalEvent.targetTouches[0],s.pageX=i.originalEvent.targetTouches[0].pageX,u(".touching").bind("touchmove",function(i){i.preventDefault(),i.stopPropagation(),o=i.originalEvent.targetTouches[0]}),!1}).bind("touchend",function(i){i.preventDefault(),i.stopPropagation(),10<=(t=o.pageX-s.pageX)?e.getPrev():t<=-10?e.getNext():n.hasClass("visible-bars")?(e.clearTimeout(),e.hideBars()):(e.showBars(),e.setTimeout()),u(".touching").off("touchmove").removeClass("touching")})}},setTimeout:function(){if(0<s.settings.hideBarsDelay){var i=this;i.clearTimeout(),i.timeout=p.setTimeout(function(){i.hideBars()},s.settings.hideBarsDelay)}},clearTimeout:function(){p.clearTimeout(this.timeout),this.timeout=null},showBars:function(){var i=u("#swipebox-caption, #swipebox-action");this.doCssTrans()?i.addClass("visible-bars"):(u("#swipebox-caption").animate({top:0},500),u("#swipebox-action").animate({bottom:0},500),setTimeout(function(){i.addClass("visible-bars")},1e3))},hideBars:function(){var i=u("#swipebox-caption, #swipebox-action");this.doCssTrans()?i.removeClass("visible-bars"):(u("#swipebox-caption").animate({top:"-50px"},500),u("#swipebox-action").animate({bottom:"-50px"},500),setTimeout(function(){i.removeClass("visible-bars")},1e3))},animBars:function(){var e=this,t=u("#swipebox-caption, #swipebox-action");r||(t.addClass("visible-bars"),e.setTimeout(),u("#swipebox-slider").click(function(i){t.hasClass("visible-bars")||(e.showBars(),e.setTimeout())}),u("#swipebox-action").hover(function(){e.showBars(),t.addClass("force-visible-bars"),e.clearTimeout()},function(){t.removeClass("force-visible-bars"),e.setTimeout()}))},keyboard:function(){if(!r){var e=this;u(p).bind("keyup",function(i){i.preventDefault(),i.stopPropagation(),37==i.keyCode?e.getPrev():39==i.keyCode?e.getNext():27==i.keyCode&&e.closeSlide()})}},actions:function(){var e=this;o.length<2?u("#swipebox-prev, #swipebox-next").hide():(u("#swipebox-prev").bind("click touchend",function(i){i.preventDefault(),i.stopPropagation(),e.getPrev(),e.setTimeout()}),u("#swipebox-next").bind("click touchend",function(i){i.preventDefault(),i.stopPropagation(),e.getNext(),e.setTimeout()})),u("#swipebox-close").bind("click touchstart",function(i){e.closeSlide()})},setSlide:function(i){var e=u("#swipebox-slider");this.doCssTrans()?e.css({left:100*-i+"%"}):e.animate({left:100*-i+"%"}),u("#swipebox-slider .slide").removeClass("current"),u("#swipebox-slider .slide").eq(i).addClass("current"),this.setTitle(i),u("#swipebox-prev, #swipebox-next").removeClass("disabled"),0==i?u("#swipebox-prev").addClass("disabled"):i==o.length-1&&u("#swipebox-next").addClass("disabled")},openSlide:function(i){u("#swipebox-overlay").show().stop().animate({opacity:1},"slow").addClass("visible"),setTimeout(function(){u("body").addClass("swipebox-overflow-hidden")},1500),this.setSlide(i)},preloadImg:function(i){var e=this;setTimeout(function(){e.openImg(i)},1e3)},openImg:function(i){if(i<0||i>=o.length)return!1;this.loadImg(o.eq(i).attr("href"),function(){u("#swipebox-slider .slide").eq(i).html(this)})},setTitle:function(i){o.eq(i).attr("title")&&u("#swipebox-caption").empty().append(o.eq(i).attr("title"))},loadImg:function(i,e){var t=u("<img>").on("load",function(){e.call(t)});t.attr("src",i)},getNext:function(){index=u("#swipebox-slider .slide").index(u("#swipebox-slider .slide.current")),index+1<o.length?(index++,this.setSlide(index),this.preloadImg(index+1)):(u("#swipebox-slider").addClass("rightSpring"),setTimeout(function(){u("#swipebox-slider").removeClass("rightSpring")},500))},getPrev:function(){index=u("#swipebox-slider .slide").index(u("#swipebox-slider .slide.current")),0<index?(index--,this.setSlide(index),this.preloadImg(index-1)):(u("#swipebox-slider").addClass("leftSpring"),setTimeout(function(){u("#swipebox-slider").removeClass("leftSpring")},500))},closeSlide:function(){var i=this;u("body").removeClass("swipebox-overflow-hidden"),u("#swipebox-overlay").animate({opacity:0},"fast"),setTimeout(function(){u("#swipebox-overlay").removeClass("visible"),i.destroy()},1e3)},destroy:function(){u(p).unbind("keyup"),u(p).unbind("resize"),u("body").unbind(),u("#swipebox-slider").unbind(),u("#swipebox-overlay").remove(),o.removeData("_swipebox")}};s.init()},u.fn.swipebox=function(i){if(!u.data(this,"_swipebox")){var e=new u.swipebox(this,i);this.data("_swipebox",e)}}}(window,document,jQuery);