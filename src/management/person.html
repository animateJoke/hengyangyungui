<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>衡阳云轨公司后台管理系统</title>
    <link rel="stylesheet" type="text/css" href="css/base.css">
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" href="css/person.css">
    <script src="js/lib/require.js/require.js" data-main="js/index"></script>
</head>
<body>
<header>
    <h1>衡阳云轨公司后台管理系统</h1>
</header>

<div class="content">
    <div class="left">
        <ul class="nav">
            <li><span>首页</span></li>
            <li><span>个人中心<i>></i></span>
                <div>
                    <p>个人资料</p>
                    <p>个人资料</p>
                    <p>个人资料</p>
                    <p>个人资料</p>
                </div>
            </li>
            <li><span>个人中心<i>></i></span></li>
            <li><span>个人中心<i>></i></span></li>
            <li><span>个人中心<i>></i></span></li>
            <li><span>个人中心<i>></i></span></li>
            <li><span>个人中心<i>></i></span></li>
        </ul>
    </div>
    <div class="right">

        <div class="admin-content" style="overflow: auto ; height: 100% ; padding-left: 20px">
            <div class="admin-content-body">
                <div class="am-cf am-padding am-padding-bottom-0">
                    <div class="am-fl am-cf"><strong class="am-text-primary am-text-lg">个人资料</strong> /
                        <small>Personal information</small>
                    </div>
                </div>

                <hr>

                <div class="am-g">
                    <div class="am-panel-bd">

                        <img class="am-img-circle am-img-thumbnail"
                             src="http://s.amazeui.org/media/i/demos/bw-2014-06-19.jpg?imageView/1/w/200/h/200/q/80"
                             alt="">
                        <form class="am-form" id="uploadForm">
                            <div class="changchuan">
                                <p>你可以使用<a href="#">gravatar.com</a>提供的头像或者使用本地上传头像。 </p>
                                <input type="file" id="user-pic" name="logo">
                                <p class="am-form-help">请选择要上传的文件...</p>
                                <button type="button" class="am-btn am-btn-primary am-btn-xs" onclick="doUpload()">保 存
                                </button>
                            </div>
                        </form>
                    </div>

                    <form class="am-form am-form-horizontal">
                        <div>
                            <label for="user-name" class="am-form-group1">姓 名 </label>
                            <input type="text" id="user-name" placeholder="姓名 / Name">
                        </div>

                        <div>
                            <label for="user-email" class="am-form-group2">电子邮件 </label>
                            <input type="email" id="user-email" placeholder="输入你的电子邮件 / Email">
                            <p class="s2"></p>
                        </div>

                        <div>
                            <label for="user-phone" class="am-form-group3">电 话 </label>
                            <input type="tel" id="user-phone" placeholder="输入你的电话号码 / Telephone">
                            <p class="s"></p>
                        </div>

                        <div>
                            <label for="user-QQ" class="am-form-group4">Q Q </label>
                            <input type="number" pattern="[0-9]*" id="user-QQ" placeholder="输入你的QQ号码">

                        </div>

                        <div>
                            <label for="user-weibo" class="am-form-group5">微 博 </label>
                            <input type="text" id="user-weibo" placeholder="输入你的微博 / Twitter">
                        </div>

                        <div>
                            <label for="user-intro" class="am-form-group6">简 介 </label>
                            <textarea class="" rows="5" id="user-intro" placeholder="输入个人简介"></textarea>
                        </div>

                        <div>
                            <div class="am-form-group7">
                                <button type="button" class="am-btn am-btn-primary">保存修改</button>
                            </div>
                        </div>
                    </form>
                </div>

                <footer class="admin-content-footer">
                    <hr>
                    <p class="am-padding-left">© 2014 AllMobilize, Inc. Licensed under MIT license.</p>
                </footer>

            </div>

        </div>
    </div>
</div>
<script src="js/lib/jquery.js"></script>
<script>
    $(function () {
        $.ajax({
            url: 'http://localhost:1111/getimg',
            type: 'POST',
            cache: false, //不必须
            data: new FormData($('#uploadForm')[0]),
            processData: false,
            contentType: false,
        }).then(function (res) {

            $(".am-img-thumbnail").attr("src","http://localhost:1111/"+res)
        })
    })
    function doUpload() {
        $.ajax({
            url: 'http://localhost:1111/getimg',
            type: 'POST',
            cache: false, //不必须
            data: new FormData($('#uploadForm')[0]),
            processData: false,
            contentType: false,
        }).then(function (res) {

            $(".am-img-thumbnail").attr("src","http://localhost:1111/"+res)
        })
    }

    $(function () {
        $(".s").text("")
        $(".s2").text("")
        $(".am-btn").on("click",function () {
            $.ajax({
                type: "POST",
                url: "http://localhost:3333/zheng",
                data: {
                    name: $("#user-name").val(),
                    email: $("#user-email").val(),
                    tel:$("#user-phone").val(),
                    QQ:$("#user-QQ").val(),
                    twitter:$("#user-weibo").val(),
                    intro:$("#user-intro").val()
                }
            })

            var bflag=true ;//
            var bflag1=true ;//
            bflag = /^((13[0-9])|(14[5-7])|(15[0-35-9])|(18[0-9]))\d{8}$/.test($("#user-phone").val())
            if(bflag==false){
                $(".s").text("手机号不对")
            }
            bflag1 =/^\w+@\w+\.\w+$/.test($("#user-email").val())
            if(bflag1==false){
                $(".s2").text("邮箱格式不对")
            }

            if(bflag,bflag1){
                alert("保存成功")
            }
        })

    })
</script>
</body>
</html>